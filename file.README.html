<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README
  
    &mdash; Documentation by YARD 0.9.9
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="file_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="puppet_class_list_link"
        href="puppet_class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><div id='filecontents'>
<h1 id="label-Puppet+Redis">Puppet Redis</h1>

<h2 id="label-Build+status">Build status</h2>

<p><a href="https://travis-ci.org/arioch/puppet-redis"><img
src="https://travis-ci.org/arioch/puppet-redis.png?branch=master"></a></p>

<h2 id="label-Example+usage">Example usage</h2>

<h3 id="label-Standalone">Standalone</h3>

<pre class="code ruby"><code class="ruby">include ::redis</code></pre>

<h3 id="label-Master+node">Master node</h3>

<pre class="code ruby"><code class="ruby">class { &#39;::redis&#39;:
  bind =&gt; &#39;10.0.1.1&#39;,
}</code></pre>

<p>With authentication</p>

<pre class="code ruby"><code class="ruby">class { &#39;::redis&#39;:
  bind       =&gt; &#39;10.0.1.1&#39;,
  masterauth =&gt; &#39;secret&#39;,
}</code></pre>

<h3 id="label-Slave+node">Slave node</h3>

<pre class="code ruby"><code class="ruby">class { &#39;::redis&#39;:
  bind    =&gt; &#39;10.0.1.2&#39;,
  slaveof =&gt; &#39;10.0.1.1 6379&#39;,
}</code></pre>

<p>With authentication</p>

<pre class="code ruby"><code class="ruby">class { &#39;::redis&#39;:
  bind       =&gt; &#39;10.0.1.2&#39;,
  slaveof    =&gt; &#39;10.0.1.1 6379&#39;,
  masterauth =&gt; &#39;secret&#39;,
}</code></pre>

<h3 id="label-Redis+3.0+Clustering">Redis 3.0 Clustering</h3>

<pre class="code ruby"><code class="ruby">class { &#39;::redis&#39;:
  bind                 =&gt; &#39;10.0.1.2&#39;,
  appendonly           =&gt; true,
  cluster_enabled      =&gt; true,
  cluster_config_file  =&gt; &#39;nodes.conf&#39;,
  cluster_node_timeout =&gt; 5000,
}</code></pre>

<h3 id="label-Manage+repositories">Manage repositories</h3>

<p>Disabled by default but if you really want the module to manage the
required repositories you can use this snippet:</p>

<pre class="code ruby"><code class="ruby">class { &#39;::redis&#39;:
  manage_repo =&gt; true,
}</code></pre>

<p>On Ubuntu, “chris-lea/redis-server” ppa repo will be added. You can change
it by using ppa_repo parameter:</p>

<pre class="code ruby"><code class="ruby">class { &#39;::redis&#39;:
  manage_repo =&gt; true,
  ppa_repo    =&gt; &#39;ppa:rwky/redis&#39;,
}</code></pre>

<h3 id="label-Redis+Sentinel">Redis Sentinel</h3>

<p>Optionally install and configuration a redis-sentinel server.</p>

<p>With default settings:</p>

<pre class="code ruby"><code class="ruby">include ::redis::sentinel</code></pre>

<p>With adjustments:</p>

<pre class="code ruby"><code class="ruby">class { &#39;::redis::sentinel&#39;:
  master_name      =&gt; &#39;cow&#39;,
  redis_host       =&gt; &#39;192.168.1.5&#39;,
  failover_timeout =&gt; 30000,
}</code></pre>

<h2 id="label-redisget-28-29+function"><code>redisget()</code> function</h2>

<p><code>redisget()</code> takes two or three arguments that are strings. The
first is the key to be looked up, the second is the URL to the Redis
service and the optional third argument is a default value to use if the
key is not found or connection to the Redis service cannot be made.</p>

<p>Example of basic usage.</p>

<pre class="code ruby"><code class="ruby"><span class='gvar'>$version</span> <span class='op'>=</span> <span class='id identifier rubyid_redisget'>redisget</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>version.myapp</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>redis://redis.example.com:6379</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
</code></pre>

<p>Example with default value specified. This is useful to allow for cached
data in case Redis is not available.</p>

<pre class="code ruby"><code class="ruby">$version = redisget(&#39;version.myapp&#39;, &#39;redis://redis.example.com:6379&#39;, $::myapp_version)</code></pre>

<p>You must have the &#39;redis&#39; gem installed on your puppet master.</p>

<h2 id="label-Unit+testing">Unit testing</h2>

<p>Plain RSpec:</p>

<pre class="code ruby"><code class="ruby">$ rake spec</code></pre>

<p>Using bundle:</p>

<pre class="code ruby"><code class="ruby">$ bundle exec rake spec</code></pre>

<p>Test against a specific Puppet or Facter version:</p>

<pre class="code ruby"><code class="ruby">$ PUPPET_VERSION=3.2.1  bundle update &amp;&amp; bundle exec rake spec
$ PUPPET_VERSION=4.10.0 bundle update &amp;&amp; bundle exec rake spec
$ FACTER_VERSION=1.6.8  bundle update &amp;&amp; bundle exec rake spec</code></pre>

<h2 id="label-Contributing">Contributing</h2>
<ul><li>
<p>Fork it</p>
</li><li>
<p>Create a feature branch (<code>git checkout -b my-new-feature</code>)</p>
</li><li>
<p>Run rspec tests (<code>bundle exec rake spec</code>)</p>
</li><li>
<p>Commit your changes (<code>git commit -am &#39;Added some
feature&#39;</code>)</p>
</li><li>
<p>Push to the branch (<code>git push origin my-new-feature</code>)</p>
</li><li>
<p>Create new Pull Request</p>
</li></ul>
</div></div>

      <div id="footer">
  Generated on Sat Jul  1 14:41:08 2017 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.9 (ruby-2.3.3).
</div>

    </div>
  </body>
</html>